<script type="text/javascript">
(function() {
   var globalYourConfigNode = null;
   
   function escapeHtml(e){return String(e).replace(/[&<>"'`=\/]/g,function(e){return entityMap[e]})}function loadScript(e,t){var o=document.createElement("script");o.type="text/javascript",o.readyState?o.onreadystatechange=function(){"loaded"!==o.readyState&&"complete"!==o.readyState||(o.onreadystatechange=null,t&&t())}:o.onload=function(){t&&t()},o.src=e,document.getElementsByTagName("head")[0].appendChild(o)}var entityMap={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;","`":"&#x60;","=":"&#x3D;"},descMap={z:"Flow Tab Id",g:"Group Id",d:"Disabled"},defaultRevertHandler=(e,t,o)=>{e=RED.nodes.node(e);e&&(e[t]=o,e.dirty=!0,RED.nodes.dirty(!0),RED.view.redraw())},revertableAttributes={x:defaultRevertHandler,y:defaultRevertHandler,template:defaultRevertHandler,name:defaultRevertHandler,info:defaultRevertHandler,func:defaultRevertHandler},revertableAttributesNames=Object.keys(revertableAttributes);function attrDesc(e){return descMap[e]?" <i style='font-size: 80%;'>("+descMap[e]+")</i>":""}function clickBaitDiff(){$("th.revertable").on("click",e=>{e.preventDefault();var t,o=$($(e.target).parent()).data("attr");confirm('Really revert changes to attribute "'+o+'"?')&&(t=revertableAttributes[o])&&t($($(e.target).parent()).data("id"),o,JSON.parse(atob($($(e.target).parent()).data("oldval"))))})}function createDiff(l,c){var f=[],s=[];try{if(Object.keys(c).forEach(function(e){var t;Object.keys(l).indexOf(e)<0&&(t="object"==typeof c[e]?JSON.stringify(c[e]):c[e],f.push("<tr class='dv-removed'><th>"+e+attrDesc(e)+"</th><td><i>MISSING</i></td><td><code>"+escapeHtml(t)+"</code></td></tr>"),s.push(e))}),Object.keys(l).forEach(function(e){var t;Object.keys(c).indexOf(e)<0&&(t="object"==typeof l[e]?JSON.stringify(l[e]):l[e],f.push("<tr class='dv-added'><th>"+e+attrDesc(e)+"</th><td><code>"+escapeHtml(t)+"</code></td><td><i>ADDED</i></td></tr>"),s.push(e))}),Object.keys(l).forEach(function(i){if(-1<Object.keys(c).indexOf(i))if(JSON.stringify(l[i])!==JSON.stringify(c[i]))try{let o=null,t=void 0;s.push(i);try{t=Diff.diffLines(c[i],l[i])}catch(e){t=Diff.diffLines(JSON.stringify(c[i],void 0,1),JSON.stringify(l[i],void 0,1))}const r=document.createDocumentFragment();t.forEach(e=>{var t=e.added?"green":e.removed?"red":"#040506";(o=document.createElement("pre")).setAttribute("class","dv-pre-elem"),o.style.color=t,o.appendChild(document.createTextNode(e.value)),o.appendChild(document.createElement("br")),r.appendChild(o)});var n=-1<revertableAttributesNames.indexOf(i)?" revertable":"",e=document.createElement("tr");e.setAttribute("class","dv-differ"),e.setAttribute("data-id",l.id),e.setAttribute("data-attr",i);try{e.setAttribute("data-oldval",btoa(JSON.stringify(c[i])))}catch(e){n=""}var a,d=document.createElement("th");d.setAttribute("class",n),d.appendChild(document.createTextNode(i)),descMap[i]&&((a=document.createElement("i")).style["font-size"]="80%",a.appendChild(document.createTextNode("("+descMap[i]+")")),d.appendChild(a)),e.append(d),(d=document.createElement("td")).setAttribute("colspan","2"),d.append(r),e.append(d),f.push(e.outerHTML)}catch(e){console.log("--Exceeption",e),f.push("<tr><th class='dv-error'>"+i+" CAUSED EXCEP</th><td><code>"+escapeHtml(l[i])+"</code></td><td><code>"+escapeHtml(c[i])+"</code></td></tr>")}else f.push("<tr><th>"+i+"</th><td><code>"+escapeHtml(l[i])+"</code></td><td><code>"+escapeHtml(c[i])+"</code></td></tr>")}),0==s.length){let o=null;var e="OBJ",t=Diff.diffJson(c,l);const d=document.createDocumentFragment();t.forEach(e=>{var t=e.added?"green":e.removed?"red":"#040506";(o=document.createElement("pre")).setAttribute("class","dv-pre-elem"),o.style.color=t,o.appendChild(document.createTextNode(e.value)),o.appendChild(document.createElement("br")),d.appendChild(o)});var i,n=document.createElement("tr"),a=(n.setAttribute("class","dv-differ"),document.createElement("th"));return a.appendChild(document.createTextNode(e)),descMap[e]&&((i=document.createElement("i")).style["font-size"]="80%",i.appendChild(document.createTextNode("("+descMap[e]+")")),a.appendChild(i)),n.append(a),(a=document.createElement("td")).setAttribute("colspan","2"),a.append(d),n.append(a),{html:n.outerHTML,icon:"fa-question"}}}catch(e){console.log("Exception",e)}var o=["x","y","w","h","g","wires"];return{html:f.join(""),icon:0==s.filter(e=>o.indexOf(e)<0).length?"fa-eye":"fa-pencil"}}function doPushSubmission(e,t){var o=RED.workspaces.active();$.ajax({url:"FlowHubPush",type:"POST",contentType:"application/json; charset=utf-8",data:JSON.stringify({flowid:o,flowdata:e||{},flowlabel:RED.nodes.workspace(o).label,cfgnode:t}),success:function(e){RED.notify("Submission triggered",{type:"warning",id:"FlowHubPush",timeout:2e3}),$("#flowhubpush-view-flow-link").attr("href","https://flowhub.org/f/"+o).show()},error:function(e,t,o){RED.notify("Submission failed: "+t,{type:"error",id:"FlowHubPush",timeout:2e3}),console.log(t,o)}})}function getFlowDataFromCurrentWorkspace(){var e=RED.workspaces.active(),t=RED.nodes.groups(e),e=(t=(t=t.concat(RED.nodes.junctions(e))).concat(RED.nodes.filterNodes({z:e})),RED.nodes.eachConfig(function(e){e.z===RED.workspaces.active()&&!1===e._def.hasUsers&&t.push(e)}),RED.nodes.workspace(e)||RED.nodes.subflow(e));return t.unshift(e),RED.nodes.createExportableNodeSet(t)}function iframeRemoveHighlight(){document.getElementById("flowhubdiff-svgimageiframe").contentWindow.postMessage({msg:"removehighlight"},"*")}function iframeHighlightItem(e){iframeRemoveHighlight(),document.getElementById("flowhubdiff-svgimageiframe").contentWindow.postMessage({item:{label:e.label,icon:e.icon,class:e.class,sublabel:e.sublabel,objid:e.objid},msg:"highlightitem"},"*")}function iframeHasBeenLoaded(e){var t=getFlowDataFromCurrentWorkspace();setTimeout(()=>{e.contentWindow.postMessage({nodes:t,msg:"renderlocalflow",flowid:RED.workspaces.active()},"*")},345)}function doSubmission(e){var t=RED.workspaces.active();if(RED.nodes.workspace(t))RED.notify("Flow Comparison Triggered",{type:"warning",id:"FlowHubDiff",timeout:2e3}),$.ajax({url:"FlowHubDiff",type:"POST",contentType:"application/json; charset=utf-8",data:JSON.stringify({flowid:t,flowhub:"submission from ",flowdata:e||{},flowlabel:RED.nodes.workspace(t).label}),success:function(e){var d=[],r={};if("failed"==e.status){RED.notify("This does not seem to be a FlowHub flow id: "+t,{type:"error",timeout:2e3}),$("#flowhubdiff-view-flow-link").hide();try{$("#node-input-flowhubdiff-diffcontainer").html(""),$("#node-input-flowhubdiff-svgcontainer").html(""),$("#node-input-flowhubdiff-target-container-div").treeList("empty")}catch(e){}}else if($("#flowhubdiff-view-flow-link").attr("href","https://flowhub.org/f/"+e.flowid).show(),e.changes.forEach(function(e){var t,o,i,n,a=e.id;"deleted"==e.type?(r[a]={label:e.oldObj.name||e.oldObj.type,icon:"fa fa-trash",class:"",diffcontent:createDiff({},e.oldObj).html,sublabel:e.oldObj.type,selected:!1,checkbox:!1,children:void 0,objid:a},d.push(r[a])):"added"==e.type?(r[a]={objid:a,label:e.newObj.name||e.newObj.type,icon:"fa fa-plus-square",class:"",diffcontent:createDiff(e.newObj,{}).html,sublabel:e.newObj.type,selected:!1,checkbox:!1,children:void 0},d.push(r[a])):"tab"==e.oldObj.type||"group"==e.oldObj.type||"junction"==e.oldObj.type?(n=createDiff(e.newObj,e.oldObj),r[a]={objid:a,label:e.oldObj.name||e.oldObj.type,icon:"fa "+n.icon,class:"",diffcontent:n.html,sublabel:e.type+" - "+e.oldObj.type,selected:!1,checkbox:!1,children:void 0},d.push(r[a])):((t=RED.nodes.node(a))||console.log("Node not found",e),(o=RED.nodes.getType(t.type))&&(i=("function"==typeof(i=o.label)?i.call(t):i)||""),o&&i||(i=t.type),n=createDiff(e.newObj,e.oldObj),r[t.id]={node:t,objid:a,label:i,icon:"fa "+n.icon,class:"",diffcontent:n.html,sublabel:e.oldObj.type,selected:!1,checkbox:!1,children:void 0},d.push(r[t.id]))}),e.ifurl&&$("#node-input-flowhubdiff-svgcontainer").html('<iframe id="flowhubdiff-svgimageiframe" width="100%" height="100%" src="'+e.ifurl+'" onload="window.iframeHasBeenLoaded(this)" style="border: none; min-height: 300px;"></iframe>'),0==d.length){RED.notify("No Flow Changes",{type:"warning",timeout:2e3});try{$("#node-input-flowhubdiff-diffcontainer").html(""),$("#node-input-flowhubdiff-target-container-div").treeList("empty")}catch(e){}}else{try{$("#node-input-flowhubdiff-target-container-div").treeList("empty")}catch(e){$("#node-input-flowhubdiff-target-container-div").css({width:"100%",height:"200px"}).treeList({multi:!1}).on("treelistitemmouseover",function(e,t){t.objid&&iframeHighlightItem(t)}).on("treelistitemmouseout",function(e,t){}).on("treelistselect",function(e,t){t.objid&&(RED.view.reveal(t.objid,!0),RED.view.redraw()),t.diffcontent?($("#node-input-flowhubdiff-diffcontainer").html(t.diffcontent),clickBaitDiff()):$("#node-input-flowhubdiff-diffcontainer").html("")}).on("treelistconfirm",function(e,t){var o;t.objid&&(o=t.objid,setTimeout(()=>{var e=RED.nodes.node(o);e&&(RED.view.reveal(e.id),RED.view.select(e.id),RED.editor.edit(e)),o==RED.workspaces.active()&&RED.workspaces.edit()},50))}),$("#node-input-flowhubdiff-target-filter").show();var o=$("#node-input-flowhubdiff-target-filter").searchBox({style:"compact",delay:300,change:function(){var e,t=$(this).val().trim().toLowerCase();""===t?($("#node-input-flowhubdiff-target-container-div").treeList("filter",null),o.searchBox("count","")):(e=$("#node-input-flowhubdiff-target-container-div").treeList("filter",function(e){return-1<e.label.toLowerCase().indexOf(t)||-1<e.node.type.toLowerCase().indexOf(t)}),o.searchBox("count",e+" / "+$("#node-input-flowhubdiff-target-container-div").treeList("data").length))}})}$("#node-input-flowhubdiff-target-container-div").treeList("data",d.sort((e,t)=>e.icon==t.icon?e.label.toLowerCase()>t.label.toLowerCase():e.icon>t.icon))}},error:function(e,t,o){$("#flowhubdiff-view-flow-link").hide();try{$("#node-input-flowhubdiff-diffcontainer").html(""),$("#node-input-flowhubdiff-svgcontainer").html(""),$("#node-input-flowhubdiff-target-container-div").treeList("empty")}catch(e){}404==e.status?RED.notify("Node has not yet been deployed, please deploy.","error"):405==e.status?RED.notify("Not Allowed.","error"):500==e.status?RED.notify("Not Allowed - 500.","error"):0==e.status?RED.notify("Not Allowed - 0.","error"):RED.notify("Not Allowed - Unexpected.","error")}});else{RED.notify("Comparing subflows not supported.",{type:"error",id:"FlowHubDiff",timeout:2e3}),$("#flowhubdiff-view-flow-link").hide();try{$("#node-input-flowhubdiff-diffcontainer").html(""),$("#node-input-flowhubdiff-svgcontainer").html(""),$("#node-input-flowhubdiff-target-container-div").treeList("empty")}catch(e){}}}window.iframeHasBeenLoaded=iframeHasBeenLoaded;

   function ensureYourConfigNodeExists() {
      // This function makes sure there is 1 instance of your config node is available, and that the globalYourConfigNode variable refers to it.
      // Explained in the next step of this tutorial... --> https://discourse.nodered.org/t/tutorial-create-a-sidebar-plugin-and-persist-the-data-in-a-config-node/82020

      // If we had found it previously, check if it has been deleted by the user behind our back
      if (globalYourConfigNode !== null) {
         var configNode = RED.nodes.node(globalYourConfigNode.id);
         if (configNode === null) { globalYourConfigNode = null; }
      }

      // If not found previously, let's go find it
      if (globalYourConfigNode === null) {
         var configNodes = [];
         RED.nodes.eachConfig(function(configNode) {
             if (configNode.type === 'FlowHubCfg') { 
                 configNodes.push(configNode); 
             }
         });

         // Make sure we only have 1 config node
         while (configNodes.length > 1) {
             var configNode = configNodes.pop();
             RED.nodes.remove(configNode.id);
             RED.nodes.dirty(true);
         }

         // When we found a config node, let's use that one
         if (configNodes.length === 1) { globalYourConfigNode = configNodes[0]; }
      }

      // When it doesn't exist yet, create it if required
      if (globalYourConfigNode === null) {
         // Remark: since this config node is dynamically created (and only used in this sidebar which isn't another node), the config
         // node is in fact "unused".  But since we don't want it to appear "unused" in the "config nodes" panel, we need to set hasUsers
         // to false (see https://github.com/node-red/node-red/blob/master/CHANGELOG.md#0161-maintenance-release).
         // The hasUsers needs also to be specified in the RED.nodes.registerType statement!
         let typ = RED.nodes.getType("FlowHubCfg");
         
         globalYourConfigNode = {
             id: RED.nodes.id(), // on the server side, this is called RED.util.generateId()
             _def: typ,
             type: "FlowHubCfg",
             hasUsers: false, 
             users: [],
             name: "FlowHubCfg",
             label: function() { return this.name || "FlowHubCfg"},
             /* default data */
             apiToken: typ.defaults.apiToken.value,
             apiTokenType: typ.defaults.apiTokenType.value,
             email: "",
             fullname: "",
         }

         // Add the new config node to the collection of Node-RED nodes
         RED.nodes.add(globalYourConfigNode);

         // Make sure the "Deploy" button becomes active
         RED.nodes.dirty(true);
      }      
   }

   // Add your plugin as a new tabsheet in the right sidebar AFTER the flow editor is completely started
   var initialiseConfigNodeOnce = () => {
      RED.events.off('runtime-state', initialiseConfigNodeOnce);

      // The html content of the sidebar has been specified below as a data-template, from where it can be loaded:
      var content = $($('script[type="text/x-red"][data-template-name="FlowHubDiff"]').i18n().html());
    
      // Add a "Your sidebar" tabsheet to the right sidebar panel, in which this sidebar panel can be displayed
      // --> more details: https://nodered.org/docs/api/ui/sidebar/
      RED.sidebar.addTab({
         id: "FlowHubDiff",
         label: "FlowHub", // short name for the tab
         name: "FlowHub.org", // long name for the menu
         content: content,
         enableOnEdit: true,
         iconClass: "fa fa-balance-scale",
         visible: true
      });

      /*
      RED.actions.remove("flowhub:flowhub-push-flow")
      RED.actions.add("flowhub:flowhub-push-flow",() => {
         ensureYourConfigNodeExists();
         doPushSubmission( getFlowDataFromCurrentWorkspace(), globalYourConfigNode )
      });
      */
      
      loadScript("https://cdn.openmindmap.org/thirdparty/diff.min.js")
      ensureYourConfigNodeExists();

      var tabs = RED.tabs.create({
            id: 'func-flowhub-tabs',
            onchange: function(tab) {
               $('#func-flowhub-tabs-content').children().hide();
               $('#' + tab.id).show();
            }
      });
      
      // Add first tab, compare
      tabs.addTab({
            id: 'func-flowhub-tab-compare',
            iconClass: 'fa fa-question',
            label: 'Compare'
      });
      
      // Add tab, push
      tabs.addTab({
            id: 'func-flowhub-tab-push',
            iconClass: 'fa fa-exclamation',
            label: 'Push'
      });
      
      tabs.activateTab("func-flowhub-tab-compare");

      $('#node-input-flowhubdiff-compare-btn').on('click', (e) => {
         e.preventDefault();
         doSubmission( getFlowDataFromCurrentWorkspace() )
      })

      $('#node-input-flowhubpush-push-btn').on('click', (e) => {
         if ( e ) { e.preventDefault(); }
         ensureYourConfigNodeExists();
         doPushSubmission( getFlowDataFromCurrentWorkspace(), globalYourConfigNode )
      });

      $("#node-input-flowhubpush-apiToken").typedInput({
          types:["env", "global", "cred"],
          typeField: "#node-input-flowhubpush-apiTokenType"
      });

      $("#node-input-flowhubpush-apiToken").typedInput( 'value', globalYourConfigNode.apiToken || globalYourConfigNode._def.defaults.apiToken.value );
      $("#node-input-flowhubpush-apiToken").typedInput( 'type', globalYourConfigNode.apiTokenType || globalYourConfigNode._def.defaults.apiTokenType.value);

      $("#node-input-flowhubpush-apiToken").on('change', () => {
         ensureYourConfigNodeExists();
         
         var val = $("#node-input-flowhubpush-apiToken").typedInput('value');
         var typ = $("#node-input-flowhubpush-apiToken").typedInput('type');

         if ( val != globalYourConfigNode.apiToken ) {
            globalYourConfigNode.apiToken = val;
            RED.nodes.dirty(true);
         }

         if ( typ != globalYourConfigNode.apiTokenType ) {
            globalYourConfigNode.apiTokenType = typ;
            RED.nodes.dirty(true);
         }
      })

      $('#node-input-flowhubpush-email').on('change', (e) => {
         if ( e ) { e.preventDefault(); }
         ensureYourConfigNodeExists();

         let val = $('#node-input-flowhubpush-email').val();
         if ( val != globalYourConfigNode.email ) { 
            globalYourConfigNode.email = val;
            RED.nodes.dirty(true);
         }
      })
      $('#node-input-flowhubpush-email').val(globalYourConfigNode.email)

      $('#node-input-flowhubpush-fullname').on('change', (e) => {
         if ( e ) { e.preventDefault(); }
         ensureYourConfigNodeExists();

         let val = $('#node-input-flowhubpush-fullname').val();
         if ( val != globalYourConfigNode.fullname ) { 
            globalYourConfigNode.fullname = val;
            RED.nodes.dirty(true);
         }
      })
      $('#node-input-flowhubpush-fullname').val(globalYourConfigNode.fullname)

      RED.comms.subscribe('flowhub:submission-result', (event,data) => {
         RED.notify("Submission status: " + data.status, {
            type: data.statusType,
            id: "FlowHubPushResult",
            timeout: 2000
         });
      });
   };
   
   RED.events.on('runtime-state', initialiseConfigNodeOnce);
})();
</script>

<style>
.diff-viewer {
    overflow: scroll;
    background-color: rgb(244, 244, 244);
    border: 1px solid rgb(196, 196, 196);
    height: 80vh;
    padding: 20px;
    max-width: 90vw;
    border-radius: 5px;
}

.dv-differ {
    background-color: rgba(244, 170, 23, 0.476) !important;
}

.dv-removed {
    background-color: rgb(203, 203, 38) !important;
}

.dv-added {
    background-color: rgb(86, 222, 120) !important;
}

.dv-error {
    background-color: #ff4b09 !important;
}

.dv-pre-elem {
    page-break-inside: avoid;
    font-family: monospace;
    max-width: 100%;
    overflow: auto;
    display: block;
    word-wrap: break-word;
    margin: 0px !important;
}

.flowhublogo {
    background-image: url("icons/@gregoriusrippenstein/node-red-contrib-flowhub/flowhublogo.svg");

    background-size: cover;
    background-repeat: no-repeat;
    background-position-x: center;
    background-position-y: top;
}

th.revertable:after {
    content: " ⟲";
    color: "green";
}

/*
 * The rest is taken from node-maker - https: //github.com/Steveorevo/node-maker
 */
.red-ui-tray-content #dialog-form {
    white-space: nowrap;
}

.full-row .red-ui-typedInput-container {
    min-width: 70%;
}

.col input {
    min-width: 100%;
}

.sml-lbl {
    height: 66px;
}

.sml-lbl label {
    font-size: smaller;
    margin-bottom: 0px;
    display: block !important;
}

.reg-lbl label {
    white-space: nowrap;
    margin-top: 5px;
    height: 0px;
}

.red-ui-editor .form-row label.full-lbl {
    white-space: normal;
    width: 100%;
}

.col {
    float: left;
    margin-right: 5px;
    min-height: 36px;
}

.col .red-ui-typedInput-container {
    width: 100% !important;
}

.col-50 {
    width: 50%;
}

.col-33 {
    width: 33%;
}

.col-66 {
    width: 66%;
}

.col-25 {
    width: 25%;
}

.col-75 {
    width: 75%;
}

.col-100 .red-ui-typedInput-container {
    width: 70% !important;
}

.col-100.no-label .red-ui-typedInput-container {
    width: 100% !important;
}

.txtarea {
    padding-bottom: 26px;
}

.txtarea label {
    vertical-align: top;
    margin-top: 3px;
}

.txtarea textarea {
    width: 70%;
    margin-bottom: -28px !important;
}

.btn-regular {
    margin-bottom: 14px !important;
}

</style>

<!-- The html for the right sidebar plugin screen -->
<script type="text/x-red" data-template-name="FlowHubDiff">
   <div class="form-row func-flowhub-tabs-row">
         <ul style="min-width: 600px; margin-bottom: 20px;" id="func-flowhub-tabs"></ul>
      </div>
      <!--func-flowhub-tabs-row-->
      <div id="func-flowhub-tabs-content" style="min-height: calc(100% - 95px);">
         <div id="func-flowhub-tab-compare" style="display:none">
            <div class="form-row">
               <div class="col-100">
      
                  <div class="form-row" style="margin-left: 10px; margin-top: 30px;">
                     <button id="node-input-flowhubdiff-compare-btn"
                                             class="red-ui-button"><i class="fa fa-balance-scale"></i> Compare to Remote Flow</button>
                     <a id="flowhubdiff-view-flow-link" style="color: blue; display: none; margin-left: 40px;" target="_blank"
                        href="">View Flow <i class="fa fa-external-link"></i></a>
                  </div>
      
                  <div class="form-row node-input-target-row node-input-target-list-row"
                     style="min-height: 100px; margin-left: 10px; margin-right: 15px;">
                     <div style="margin-right: 15px; margin-bottom: 5px; width: 35%; padding-left: 60%;">
                        <input type="text" id="node-input-flowhubdiff-target-filter" style="display: none;">
                     </div>
      
                     <div id="node-input-flowhubdiff-target-container-div" style="min-height: 100px"></div>
                  </div>
      
                  <div class="form-row" style="min-height: 300px; margin-left: 10px; margin-right: 15px;">
                     <div id="node-input-flowhubdiff-svgcontainer"></div>
                  </div>
      
                  <div class="form-row" style="min-height: 100px; margin-left: 10px; margin-right: 15px;">
                     <div id="node-input-flowhubdiff-diffcontainer" class="diff-viewer"></div>
                  </div>
      
               </div>
            </div>
            <!--form-row-->
         </div>
         
         <!--func-flowhub-tab-tab#-->
         <div id="func-flowhub-tab-push" style="display:none">
            <div class="form-row">
               <div class="col-100">

                  <div class="form-row" style="margin-top: 30px; margin-left: 10px;">
                     <button id="node-input-flowhubpush-push-btn"
                        class="red-ui-button"><i class="fa fa-share-square-o"></i> Push Flow to FlowHub</button>
                     <a id="flowhubpush-view-flow-link" style="color: blue; display: none; margin-left: 80px;" target="_blank"
                        href="">View Flow <i class="fa fa-external-link"></i></a>
                  </div>

                  <div class="form-row" style="margin-left: 10px; margin-top: 20px;">
                     <label for="node-input-flowhubpush-apiToken">
                        <i class="fa fa-tag"></i>
                        FlowHub API Token
                     </label>
                     <input type="text" id="node-input-flowhubpush-apiToken">
                     <input type="hidden" id="node-input-flowhubpush-apiTokenType">
                  </div>

                  <div class="form-row" style="margin-left: 10px;">
                     Api Token can be obtained <a style="color: blue;"
                        href="mailto:api.token@flowhub.org?subject=API%20Token%20Request">upon request
                        <i class="fa fa-external-link"></i></a>.
                  </div>

                  <div class="form-row" style="margin-left: 10px;">
                     Alternatively provide your email and full name to submit the current flow.<br>
                        All submissions will be reviewed at GitHub and either merged or dropped.<br>
                        Your <b>email and name</b> will be attached to the commit added to <br>
                        the <a style="color: blue;" target="_blank" href="https://github.com/gorenje/flows.flowhub.org">FlowHub repository
                        <i class="fa fa-external-link"></i></a>
                  </div>

                  <div class="form-row" style="margin-left: 10px;">
                     <label for="node-input-flowhubpush-email">
                        <i class="fa fa-tag"></i>
                        Email
                     </label>
                     <input type="text" id="node-input-flowhubpush-email"
                           placeholder="john.smith@example.com">
                  </div>

                  <div class="form-row" style="margin-left: 10px;">
                     <label for="node-input-flowhubpush-fullname">
                        <i class="fa fa-tag"></i>
                        Name
                     </label>
                     <input type="text" id="node-input-flowhubpush-fullname"
                           placeholder="Firstname Surname">
                  </div>

                  <div class="form-row" style="margin-left: 10px;">
                     All submissions must be verified by email. After submission you<br>
                        will recieve an email to <b>confirm your submission</b>.
                  </div>

                  <div class="form-row" style="margin-left: 10px;">
                     <b>License:</b><br><br>
                        All flows submitted are licensed under a copyleft <a style="color: blue;" target="_blank"
                        href="https://raw.githubusercontent.com/gorenje/flows.flowhub.org/main/LICENSE">license
                        <i class="fa fa-external-link"></i></a>,<br>
                        that grants complete do-anything-but-not-evil permission to the user<br>
                        and provides no warranty in case of failure nor guarantee of success.
                  </div>

               </div>
            </div>
            <!--form-row-->
         </div>
         <!--func-flowhub-tab-tab#-->
      </div>
      <!--func-flowhub-tabs-content-->



</script>
